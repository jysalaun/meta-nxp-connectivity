From fa6c2af097c2aa86de73edb6346958f178cba016 Mon Sep 17 00:00:00 2001
From: Jean-Yves Salaun <jean-yves.salaun@nxp.com>
Date: Wed, 18 Dec 2024 12:48:15 +0100
Subject: [PATCH 1/1] Specify MBEDTLS_COMPILER_IS_GCC inlibrary/common.h

---
 third_party/mbedtls/repo/library/common.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Upstream-Status: Inappropriate [platform specific changes]

diff --git a/third_party/mbedtls/repo/library/common.h b/third_party/mbedtls/repo/library/common.h
index 3936ffdfe..d8c407319 100644
--- a/third_party/mbedtls/repo/library/common.h
+++ b/third_party/mbedtls/repo/library/common.h
@@ -199,7 +199,7 @@ static inline void mbedtls_xor(unsigned char *r,
         uint8x16_t x = veorq_u8(v1, v2);
         vst1q_u8(r + i, x);
     }
-#if defined(__IAR_SYSTEMS_ICC__)
+#if defined(__IAR_SYSTEMS_ICC__) || defined(MBEDTLS_COMPILER_IS_GCC)
     /* This if statement helps some compilers (e.g., IAR) optimise out the byte-by-byte tail case
      * where n is a constant multiple of 16.
      * For other compilers (e.g. recent gcc and clang) it makes no difference if n is a compile-time
-- 
2.43.0

